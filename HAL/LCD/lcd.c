/*-----------------------------------------------------------------------------
File Name   	:   lcd.c
Author          :   zhaoji
Created Time    :   2018.02.24
Description     :   LCD接口
-----------------------------------------------------------------------------*/
#include "lcd.h"
#include "common.h"
#include "delay.h"

/*----------------------------------------------------------------------------*
                               Dependencies                                   *
------------------------------------------------------------------------------*/



/*----------------------------------------------------------------------------*
**                             Mcaro Definitions                              *
**----------------------------------------------------------------------------*/


/*----------------------------------------------------------------------------*
**                             Global Vars                                    *
**----------------------------------------------------------------------------*/
_tftlcd_data  tftlcd_data;

//LCD的画笔颜色和背景色	   
u16 FRONT_COLOR=BLACK;	//画笔颜色
u16 BACK_COLOR=WHITE;  //背景色 

/*----------------------------------------------------------------------------*
**                             Local Vars                                     *
**----------------------------------------------------------------------------*/


void _CMIOT_Ctrl_GPIO_Init(void)
{
	GPIO_InitTypeDef GPIO_InitStructure;
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOD,ENABLE);    
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOG,ENABLE);    

	GPIO_InitStructure.GPIO_Pin=GPIO_Pin_4|GPIO_Pin_5;
	GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
	GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;       
	GPIO_Init(GPIOD,&GPIO_InitStructure);

	GPIO_InitStructure.GPIO_Pin=GPIO_Pin_0|GPIO_Pin_12;
	GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
	GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;       
	GPIO_Init(GPIOG,&GPIO_InitStructure);
}


void Write_config(FunctionalState NewState)
{
	GPIO_InitTypeDef GPIO_InitStructure;            
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOD,ENABLE);    
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOE,ENABLE);   
	if(NewState!=DISABLE)
	{
		GPIO_InitStructure.GPIO_Pin=GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_8|
									GPIO_Pin_9|GPIO_Pin_10|GPIO_Pin_14|GPIO_Pin_15;
		GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
		GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;      
		GPIO_Init(GPIOD,&GPIO_InitStructure);
		GPIO_InitStructure.GPIO_Pin=GPIO_Pin_7|GPIO_Pin_8|GPIO_Pin_9|
									GPIO_Pin_10|GPIO_Pin_11|GPIO_Pin_12|
									GPIO_Pin_13|GPIO_Pin_14|GPIO_Pin_15;
		GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
		GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;      
		GPIO_Init(GPIOE,&GPIO_InitStructure);
	}
	else
	{
		GPIO_InitStructure.GPIO_Pin=GPIO_Pin_0|GPIO_Pin_1|GPIO_Pin_8|
									GPIO_Pin_9|GPIO_Pin_10|GPIO_Pin_14|GPIO_Pin_15;
		GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
		GPIO_InitStructure.GPIO_Mode=GPIO_Mode_IPU;       
		GPIO_Init(GPIOD,&GPIO_InitStructure);
		GPIO_InitStructure.GPIO_Pin=GPIO_Pin_7|GPIO_Pin_8|GPIO_Pin_9|
									GPIO_Pin_10|GPIO_Pin_11|GPIO_Pin_12|
									GPIO_Pin_13|GPIO_Pin_14|GPIO_Pin_15;
		GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz;
		GPIO_InitStructure.GPIO_Mode=GPIO_Mode_IPU;        
		GPIO_Init(GPIOE,&GPIO_InitStructure);
	}
}


void Write_data(unsigned char Data)
{
	unsigned char temp=0x00;
	temp=Data;
	Data0_OUT=(temp>>0)&0x01;
	Data1_OUT=(temp>>1)&0x01;
	Data2_OUT=(temp>>2)&0x01;
	Data3_OUT=(temp>>3)&0x01;
	Data4_OUT=(temp>>4)&0x01;
	Data5_OUT=(temp>>5)&0x01;
	Data6_OUT=(temp>>6)&0x01;
	Data7_OUT=(temp>>7)&0x01;
//	Data8_OUT=(temp>>8)&0x0001;
//	Data9_OUT=(temp>>9)&0x0001;
//	Data10_OUT=(temp>>10)&0x0001;
//	Data11_OUT=(temp>>11)&0x0001;
//	Data12_OUT=(temp>>12)&0x0001;
//	Data13_OUT=(temp>>13)&0x0001;
//	Data14_OUT=(temp>>14)&0x0001;
//	Data15_OUT=(temp>>15)&0x0001;
}




/**
 *LCD写数据
 *
 *
 */
void LCD_DataWrite(unsigned char Data)
{
	Write_config(ENABLE);
	CS=0;
	RS=1;
	RD=1;
	Write_data(Data);
	WR=0;
	WR=1;
	CS=1;
}


/**
 *LCD写命令
 *
 *·
 */
void LCD_CtrlWrite(unsigned char Cmd)
{
	Write_config(ENABLE);
	CS=0;
	RS=0;
	RD=1;
	Write_data(Cmd);
	WR=0;
	WR=1;
	CS=1;
}



void LCD_RST(void)
{
	H_Reset;
	delay_ms(20);
	L_Reset;
	delay_ms(20);
	H_Reset;
	delay_ms(120);
}


void GC9304_Init()
{
	LCD_RST();
	
	LCD_CtrlWrite(0xfe);// internal reg enable	
	LCD_CtrlWrite(0xef);//// internal reg enable	
	LCD_CtrlWrite(0x36);
	LCD_DataWrite(0x48);
	LCD_CtrlWrite(0x3a);
	LCD_DataWrite(0x06);
	LCD_CtrlWrite(0xe8);
	LCD_DataWrite(0x12);
	LCD_DataWrite(0x22);
		//=============		

	LCD_CtrlWrite(0xe3);
	LCD_DataWrite(0x01);
	LCD_DataWrite(0x04);
	LCD_CtrlWrite(0xa5);
	LCD_DataWrite(0x40);
	LCD_DataWrite(0x40);
	LCD_CtrlWrite(0xa4);
	LCD_DataWrite(0x44);
	LCD_DataWrite(0x44);
	LCD_CtrlWrite(0xab);
	LCD_DataWrite(0x08);
	LCD_CtrlWrite(0xaa);
	LCD_DataWrite(0x88);
	LCD_DataWrite(0x88);
	LCD_CtrlWrite(0xae);
	LCD_DataWrite(0x0b);//0x1c  20151013 update
	LCD_CtrlWrite(0xac);
	LCD_DataWrite(0x00);
	LCD_CtrlWrite(0xaf);

	LCD_DataWrite(0x77);
	LCD_CtrlWrite(0xad);
	LCD_DataWrite(0x77);

		
	//===============gamma==========		
	LCD_CtrlWrite(0xF0);
	LCD_DataWrite(0x02);
	LCD_DataWrite(0x02);

	LCD_DataWrite(0x00);
	LCD_DataWrite(0x09);
	LCD_DataWrite(0x13);
	LCD_DataWrite(0x0E);
	LCD_CtrlWrite(0xF1);
	LCD_DataWrite(0x01);
	LCD_DataWrite(0x02);
	LCD_DataWrite(0x00);
	LCD_DataWrite(0x0F);
	LCD_DataWrite(0x1C);
	LCD_DataWrite(0x10);
	LCD_CtrlWrite(0xF2);
	LCD_DataWrite(0x0F);
	LCD_DataWrite(0x08);
	LCD_DataWrite(0x39);
	LCD_DataWrite(0x04);
	LCD_DataWrite(0x05);
	LCD_DataWrite(0x49);
	LCD_CtrlWrite(0xF3);
	LCD_DataWrite(0x11);
	LCD_DataWrite(0x0A);

	LCD_DataWrite(0x41);
	LCD_DataWrite(0x03);
	LCD_DataWrite(0x03);
	LCD_DataWrite(0x4F);
	LCD_CtrlWrite(0xF4);
	LCD_DataWrite(0x0F);
	LCD_DataWrite(0x18);
	LCD_DataWrite(0x16);
	LCD_DataWrite(0x1D);
	LCD_DataWrite(0x20);
	LCD_DataWrite(0x0F);
	LCD_CtrlWrite(0xF5);
	LCD_DataWrite(0x05);
	LCD_DataWrite(0x11);
	LCD_DataWrite(0x11);
	LCD_DataWrite(0x1C);
	LCD_DataWrite(0x1F);
	LCD_DataWrite(0x0F);

	LCD_CtrlWrite(0x35);
	LCD_DataWrite(0x00);


	LCD_CtrlWrite(0x44);
	LCD_DataWrite(0x00);
	LCD_DataWrite(0x0a);

	LCD_CtrlWrite(0x11);
	delay_ms(120);

	LCD_CtrlWrite(0x29);
	LCD_CtrlWrite(0x2c);
}


void WriteOneDot(unsigned int color)
{ 
	
	LCD_DataWrite(color>>8);
    LCD_DataWrite(color&0xFF);

}


void BlockWrite(unsigned int Xstart,unsigned int Xend,unsigned int Ystart,unsigned int Yend)
{
	LCD_CtrlWrite(0x2a);   
	LCD_DataWrite(Xstart>>8);
	LCD_DataWrite(Xstart&0xff);
	LCD_DataWrite(Xend>>8);
	LCD_DataWrite(Xend&0xff);

	LCD_CtrlWrite(0x2b);   
	LCD_DataWrite(Ystart>>8);
	LCD_DataWrite(Ystart&0xff);
	LCD_DataWrite(Yend>>8);
	LCD_DataWrite(Yend&0xff);

	LCD_CtrlWrite(0x2c);
}


#ifdef CHAR_FONT_W8_H16
//ascii 32~90(!~Z), (32~47)ࠕٱ~/,(48~57)0~9,(58~64):~@,(65~126)A~~
//ord 0~95, (48~57)0~9,(65~126)A~z,(33~47)!~/,(58~64):~@
unsigned char const ascii[]=
{
//̎ͥ12,ֳ֣Ϊú࠭xٟ=8x16 
//0(ord:0)
0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00,

//(ord:1)~1
0x00,0x00,0x00,0x10,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

//(ord:2)~2
0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x04,0x04,0x08,0x10,0x20,0x42,0x7E,0x00,0x00,

//(ord:3)~3
0x00,0x00,0x00,0x3C,0x42,0x42,0x04,0x18,0x04,0x02,0x02,0x42,0x44,0x38,0x00,0x00,

//(ord:4)~4
0x00,0x00,0x00,0x04,0x0C,0x14,0x24,0x24,0x44,0x44,0x7E,0x04,0x04,0x1E,0x00,0x00,

//(ord:5)~5
0x00,0x00,0x00,0x7E,0x40,0x40,0x40,0x58,0x64,0x02,0x02,0x42,0x44,0x38,0x00,0x00,

//(ord:0)~6
0x00,0x00,0x00,0x1C,0x24,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x24,0x18,0x00,0x00,

//(ord:0)~7
0x00,0x00,0x00,0x7E,0x44,0x44,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,

//(ord:0)~8
0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x24,0x18,0x24,0x42,0x42,0x42,0x3C,0x00,0x00,

//(ord:0)~9
0x00,0x00,0x00,0x18,0x24,0x42,0x42,0x42,0x26,0x1A,0x02,0x02,0x24,0x38,0x00,0x00,

// A~Z,̎ͥ12;  ՋؖͥЂהӦքֳ֣Ϊú࠭xٟ=8x16 
//(ord:10)~A 
0x00,0x00,0x00,0x10,0x10,0x18,0x28,0x28,0x24,0x3C,0x44,0x42,0x42,0xE7,0x00,0x00,

//(ord:11)~B  
0x00,0x00,0x00,0xF8,0x44,0x44,0x44,0x78,0x44,0x42,0x42,0x42,0x44,0xF8,0x00,0x00,

//(ord:12)~C  
0x00,0x00,0x00,0x3E,0x42,0x42,0x80,0x80,0x80,0x80,0x80,0x42,0x44,0x38,0x00,0x00,

//(ord:13)~D 
0x00,0x00,0x00,0xF8,0x44,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x44,0xF8,0x00,0x00,

//(ord:14)~E  
0x00,0x00,0x00,0xFC,0x42,0x48,0x48,0x78,0x48,0x48,0x40,0x42,0x42,0xFC,0x00,0x00,

//(ord:15)~F 
0x00,0x00,0x00,0xFC,0x42,0x48,0x48,0x78,0x48,0x48,0x40,0x40,0x40,0xE0,0x00,0x00,

//(ord:16)~G  
0x00,0x00,0x00,0x3C,0x44,0x44,0x80,0x80,0x80,0x8E,0x84,0x44,0x44,0x38,0x00,0x00,

//(ord:17)~H 
0x00,0x00,0x00,0xE7,0x42,0x42,0x42,0x42,0x7E,0x42,0x42,0x42,0x42,0xE7,0x00,0x00,

//(ord:18)~I 
0x00,0x00,0x00,0x7C,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

//(ord:19)~J  
0x00,0x00,0x00,0x3E,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x88,0xF0,

//(ord:20)~K 
0x00,0x00,0x00,0xEE,0x44,0x48,0x50,0x70,0x50,0x48,0x48,0x44,0x44,0xEE,0x00,0x00,

//(ord:21)~L  
0x00,0x00,0x00,0xE0,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x40,0x42,0xFE,0x00,0x00,

//(ord:22)~M  
0x00,0x00,0x00,0xEE,0x6C,0x6C,0x6C,0x6C,0x54,0x54,0x54,0x54,0x54,0xD6,0x00,0x00,

//(ord:23)~N 
0x00,0x00,0x00,0xC7,0x62,0x62,0x52,0x52,0x4A,0x4A,0x4A,0x46,0x46,0xE2,0x00,0x00,

//(ord:24)~O  
0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0x82,0x82,0x44,0x38,0x00,0x00,

//(ord:25)~P  
0x00,0x00,0x00,0xFC,0x42,0x42,0x42,0x42,0x7C,0x40,0x40,0x40,0x40,0xE0,0x00,0x00,

//(ord:26)~Q 
0x00,0x00,0x00,0x38,0x44,0x82,0x82,0x82,0x82,0x82,0xB2,0xCA,0x4C,0x38,0x06,0x00,

//(ord:27)~R  
0x00,0x00,0x00,0xFC,0x42,0x42,0x42,0x7C,0x48,0x48,0x44,0x44,0x42,0xE3,0x00,0x00,

//(ord:28)~S  
0x00,0x00,0x00,0x3E,0x42,0x42,0x40,0x20,0x18,0x04,0x02,0x42,0x42,0x7C,0x00,0x00,

//(ord:29)~T  
0x00,0x00,0x00,0xFE,0x92,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,

//(ord:30)~U 
0x00,0x00,0x00,0xE7,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,

//(ord:31)~V  
0x00,0x00,0x00,0xE7,0x42,0x42,0x44,0x24,0x24,0x28,0x28,0x18,0x10,0x10,0x00,0x00,

//(ord:32)~W  
0x00,0x00,0x00,0xD6,0x92,0x92,0x92,0x92,0xAA,0xAA,0x6C,0x44,0x44,0x44,0x00,0x00,

//(ord:33)~X 
0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x18,0x18,0x18,0x24,0x24,0x42,0xE7,0x00,0x00,

//(ord:34)~Y  
0x00,0x00,0x00,0xEE,0x44,0x44,0x28,0x28,0x10,0x10,0x10,0x10,0x10,0x38,0x00,0x00,

//(ord:35)~Z 
0x00,0x00,0x00,0x7E,0x84,0x04,0x08,0x08,0x10,0x20,0x20,0x42,0x42,0xFC,0x00,0x00,

//(ord:36)~ [  
0x00,0x1E,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x1E,0x00,

//(ord:37)~ '\'
0x00,0x00,0x40,0x40,0x20,0x20,0x10,0x10,0x10,0x08,0x08,0x04,0x04,0x04,0x02,0x02,

//(ord:38)~ ] 
0x00,0x78,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x78,0x00,

//(ord:39)~ ^ 
0x00,0x1C,0x22,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//(ord:40)~ _ 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFF,

//(ord:41)~ `
0x00,0x60,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//(ord:42)~ a  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x1E,0x22,0x42,0x42,0x3F,0x00,0x00,

//(ord:43)~ b 
0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x58,0x64,0x42,0x42,0x42,0x64,0x58,0x00,0x00,

//(ord:44)~ c 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x22,0x40,0x40,0x40,0x22,0x1C,0x00,0x00,

//(ord:45)~ d  
0x00,0x00,0x00,0x06,0x02,0x02,0x02,0x1E,0x22,0x42,0x42,0x42,0x26,0x1B,0x00,0x00,

//(ord:46)~ e 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x7E,0x40,0x40,0x42,0x3C,0x00,0x00,

//(ord:47)~ f 
0x00,0x00,0x00,0x0F,0x11,0x10,0x10,0x7E,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

//(ord:48)~ g
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x44,0x44,0x38,0x40,0x3C,0x42,0x42,0x3C,

//(ord:49)~ h 
0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x5C,0x62,0x42,0x42,0x42,0x42,0xE7,0x00,0x00,

//(ord:50)~ i  
0x00,0x00,0x00,0x30,0x30,0x00,0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

//(ord:51)~ j  
0x00,0x00,0x00,0x0C,0x0C,0x00,0x00,0x1C,0x04,0x04,0x04,0x04,0x04,0x04,0x44,0x78,

//(ord:52)~ k 
0x00,0x00,0x00,0xC0,0x40,0x40,0x40,0x4E,0x48,0x50,0x68,0x48,0x44,0xEE,0x00,0x00,

//(ord:53)~ l  
0x00,0x00,0x00,0x70,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x7C,0x00,0x00,

//(ord:54)~ m  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x49,0x49,0x49,0x49,0x49,0xED,0x00,0x00,

//(ord:55)~ n  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xDC,0x62,0x42,0x42,0x42,0x42,0xE7,0x00,0x00,

//(ord:56)~ o  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3C,0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00,

//(ord:57)~ p 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD8,0x64,0x42,0x42,0x42,0x44,0x78,0x40,0xE0,

//(ord:58)~ q  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1E,0x22,0x42,0x42,0x42,0x22,0x1E,0x02,0x07,

//(ord:59)~ r 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xEE,0x32,0x20,0x20,0x20,0x20,0xF8,0x00,0x00,

//(ord:60)~ s  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3E,0x42,0x40,0x3C,0x02,0x42,0x7C,0x00,0x00,

//(ord:61)~ t 
0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x7C,0x10,0x10,0x10,0x10,0x10,0x0C,0x00,0x00,

//(ord:62)~ u 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xC6,0x42,0x42,0x42,0x42,0x46,0x3B,0x00,0x00,

//(ord:63)~ v 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x28,0x10,0x10,0x00,0x00,

//(ord:64)~ w 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xD7,0x92,0x92,0xAA,0xAA,0x44,0x44,0x00,0x00,

//(ord:65)~ x 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x6E,0x24,0x18,0x18,0x18,0x24,0x76,0x00,0x00,

//(ord:66)~ y 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xE7,0x42,0x24,0x24,0x28,0x18,0x10,0x10,0xE0,

//(ord:67)~ z 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x44,0x08,0x10,0x10,0x22,0x7E,0x00,0x00,

//(ord:68)~ { 
0x00,0x03,0x04,0x04,0x04,0x04,0x04,0x08,0x04,0x04,0x04,0x04,0x04,0x04,0x03,0x00,

//(ord:69)~ |  
0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,

//(ord:70)~ } 
0x00,0x60,0x10,0x10,0x10,0x10,0x10,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x60,0x00,

//(ord:71)~ ~  
0x30,0x4C,0x43,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,


//(ord:72)~ ࠕٱ 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//(ord:73)~ !  
0x00,0x00,0x00,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,0x00,0x18,0x18,0x00,0x00,

//(ord:74)~ " 
0x00,0x12,0x36,0x24,0x48,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//(ord:75)~ #  
0x00,0x00,0x00,0x24,0x24,0x24,0xFE,0x48,0x48,0x48,0xFE,0x48,0x48,0x48,0x00,0x00,

//(ord:76)~ $  
0x00,0x00,0x10,0x38,0x54,0x54,0x50,0x30,0x18,0x14,0x14,0x54,0x54,0x38,0x10,0x10,

//(ord:77)~ % 
0x00,0x00,0x00,0x44,0xA4,0xA8,0xA8,0xA8,0x54,0x1A,0x2A,0x2A,0x2A,0x44,0x00,0x00,

//(ord:78)~ & 
0x00,0x00,0x00,0x30,0x48,0x48,0x48,0x50,0x6E,0xA4,0x94,0x88,0x89,0x76,0x00,0x00,

//(ord:79)~ '  
0x00,0x60,0x60,0x20,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//(ord:80)~ ( 
0x00,0x02,0x04,0x08,0x08,0x10,0x10,0x10,0x10,0x10,0x10,0x08,0x08,0x04,0x02,0x00,

//(ord:81)~ ) 
0x00,0x40,0x20,0x10,0x10,0x08,0x08,0x08,0x08,0x08,0x08,0x10,0x10,0x20,0x40,0x00,

//(ord:82)~ *  
0x00,0x00,0x00,0x00,0x10,0x10,0xD6,0x38,0x38,0xD6,0x10,0x10,0x00,0x00,0x00,0x00,

//(ord:83)~ +  
0x00,0x00,0x00,0x00,0x10,0x10,0x10,0x10,0xFE,0x10,0x10,0x10,0x10,0x00,0x00,0x00,

//(ord:84)~ , 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x20,0xC0,

//(ord:85)~ - 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//(ord:86)~ . 
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x60,0x00,0x00,

//(ord:87)~ /  
0x00,0x00,0x01,0x02,0x02,0x04,0x04,0x08,0x08,0x10,0x10,0x20,0x20,0x40,0x40,0x00,

//(ord:88)~ : 
0x00,0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,0x00,0x00,0x18,0x18,0x00,0x00,

//(ord:89)~ ;  
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x10,0x00,0x00,0x00,0x00,0x00,0x10,0x10,0x20,

//(ord:90)~ < 
0x00,0x00,0x00,0x02,0x04,0x08,0x10,0x20,0x40,0x20,0x10,0x08,0x04,0x02,0x00,0x00,

//(ord:91)~ = 
0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,

//(ord:92)~ >  
0x00,0x00,0x00,0x40,0x20,0x10,0x08,0x04,0x02,0x04,0x08,0x10,0x20,0x40,0x00,0x00,

//(ord:93)~ ?
0x00,0x00,0x00,0x3C,0x42,0x42,0x62,0x02,0x04,0x08,0x08,0x00,0x18,0x18,0x00,0x00,

//(ord:94)~ @ 
0x00,0x00,0x00,0x38,0x44,0x5A,0xAA,0xAA,0xAA,0xAA,0xB4,0x42,0x44,0x38,0x00,0x00,

//(ord:95)~ 0xff 
0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,

};
#endif






void  DispOneChar(unsigned char ord,unsigned int Xstart,unsigned int Ystart,unsigned int TextColor,unsigned int BackColor)	 // ord:0~95
{													  
   unsigned char i,j;
   unsigned char  *p;
   unsigned char dat;
   unsigned int index;

   BlockWrite(Xstart,Xstart+(FONT_W-1),Ystart,Ystart+(FONT_H-1));

   index = ord;

   if(index>95)	   //95:ASCII CHAR NUM
   		index=95;

   index = index*((FONT_W/8)*FONT_H);	 

   p = (uint8_t *)ascii;
   p = p+index;

   for(i=0;i<(FONT_W/8*FONT_H);i++)
    {
       dat=*p++;
       for(j=0;j<8;j++)
        {
           if((dat<<j)&0x80)
             {
                WriteOneDot(TextColor);
             }      
           else 
             {
                WriteOneDot(BackColor);	  
             }
         }
     }
}


unsigned char ToOrd(unsigned char ch)
{
	if(ch<32)
	{
		ch=95;
	}
	else if((ch>=32)&&(ch<=47)) //(32~47)ࠕٱ~/
	{
		ch=(ch-32)+10+62;
	}
	else if((ch>=48)&&(ch<=57))//(48~57)0~9
	{
		ch=ch-48;
	}
	else if((ch>=58)&&(ch<=64))//(58~64):~@
	{
		ch=(ch-58)+10+62+16;
	}
	else if((ch>=65)&&(ch<=126))//(65~126)A~~
	{
		ch=(ch-65)+10;
	}
	else if(ch>126)
	{		
		ch=95;
	}

	return ch;
}



void DispStr(unsigned char *str,unsigned int Xstart,unsigned int Ystart,unsigned int TextColor,unsigned int BackColor)
{

	while(!(*str=='\0'))
	{
		DispOneChar(ToOrd(*str++),Xstart,Ystart,TextColor,BackColor);

		if(Xstart>((LCD_WIDTH-1)-FONT_W))
		{
			Xstart=0;
		    Ystart=Ystart+FONT_H;
		}
		else
		{
			Xstart=Xstart+FONT_W;
		}

		if(Ystart>((LCD_HEIGHT-1)-FONT_H))
		{
			Ystart=0;
		}
	}	
	
	BlockWrite(0,LCD_WIDTH-1,0,LCD_HEIGHT-1);
}



